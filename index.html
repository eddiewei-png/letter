<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A Letter for u</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />

  <style>
    :root {
      --pink: #ff69b4;
      --light-bg: #fff0f5;
      --white-bg: #ffffffee;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--light-bg);
      color: var(--pink);
      text-align: left;
      position: relative;
    }

    .full-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: var(--light-bg);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 10;
      padding: 20px;
    }

    #startBtn {
      padding: 14px 26px;
      font-size: 1.1rem;
      background-color: var(--pink);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(255, 105, 180, 0.3);
      transition: background 0.3s;
      margin-top: 20px;
      position: relative;
      overflow: hidden;
    }
    #startBtn:hover { background-color: #ff85c1; }

    /* simple ripple on click (visual only) */
    #startBtn::after {
      content: "";
      position: absolute;
      width: 24px;
      height: 24px;
      background: rgba(255,255,255,0.6);
      display: block;
      border-radius: 50%;
      transform: scale(0);
      opacity: 0;
      pointer-events: none;
    }
    #startBtn:active::after { animation: ripple 0.55s linear; }
    @keyframes ripple { from { transform: scale(0); opacity: .6 } to { transform: scale(12); opacity: 0 } }

    #container {
      max-width: 90%;
      width: 700px;
      background: var(--white-bg);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 15px rgba(250, 50, 120, 0.2);
      margin: 80px auto;
      display: none;
      text-align: left;
      position: relative;
    }

    h1 { font-size: 2rem; margin-bottom: 1rem; }

    #letter p {
      font-family: 'Great Vibes', cursive;
      font-size: 1.8rem;
      color: var(--pink);
      margin: 1.2em 0;
      position: relative;
      white-space: normal;
    }

    /* word container (keeps word on one line) */
    #letter p span.word {
      white-space: nowrap;
      margin-right: 0.25em;
      position: relative;
      display: inline-block;
    }

    /* each character is measurable */
    #letter p span.char {
      display: inline-block;     /* allows getBoundingClientRect to match glyph */
      line-height: 1;            /* avoid extra vertical spacing */
      vertical-align: baseline;
    }

    /* Paintbrush SVG used as pen */
    #pen {
      position: absolute;
      width: 28px;
      height: 28px;
      transition: left 0.18s ease-out, top 0.18s ease-out, transform 0.18s ease-out;
      pointer-events: none;
      user-select: none;
      z-index: 25;
      opacity: 0;
      /* tweak these until the tip visually matches YOUR font baseline */
      transform: translate(-80%, -95%) rotate(-20deg);
    }

    /* smaller on mobile */
    @media (max-width: 600px) {
      #letter p { font-size: 1.4rem; }
      #pen { width: 22px; height: 22px; transform: translate(-80%, -95%) rotate(-20deg); }
    }

    #heart {
      font-size: 2.3rem;
      color: #ff4d6d;
      margin-top: 24px;
      animation: beat 1.2s infinite;
      text-align: center;
    }
    @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }

    audio { display: none; }
  </style>
</head>
<body>
  <!-- Landing -->
  <div id="intro" class="full-screen">
    <h1>üíå You have a letter waitingg...</h1>
    <button id="startBtn">Tap to Begin</button>
  </div>

  <!-- Letter -->
  <div id="container">
    <h1>üíå A Letter for u</h1>
    <div id="letter"></div>
    <div id="heart">‚ù§Ô∏è</div>

    <!-- Your original paintbrush SVG (clean viewBox, no fixed width/height) -->
    <svg id="pen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" aria-hidden="true">
      <path d="M20.5 54.6c.9-9.9 5.4-9.7 3-12c-2.3-2.3.3-.3-12.3 3.3c-4.5 1.3-6.4 5.3-6.7 8.8c-.1 1-.8 5.6-4.5 7c0 0 7.8.8 11.7 0c4-.3 8.4-2.3 8.8-7.1" fill="#3e4347"></path>
      <path d="M11.6 45.7s2.8.3 2.4 2.4c-.4 2.1 2.2.1 2.3 1.7c.1 1.7 2.9.6 2.8 2.2c-.1 1.7 1.8 1 1.5 2.5c-.3 1.5-.7 3.2-1.9 4.2c-1.1 1 .4-4.8-.9-3.6c-1.3 1.2-1-2.9-2.8-2.1c-1.9.8-.3-3.3-2.4-2.4c-2.1.9-1.4-3-2.7-2.7c-1.3.4-1.1-.9-1.1-.9s1.1-.8 2.8-1.3" fill="#94989b"></path>
      <path d="M4.6 53.8s-.7 6.3-4.6 7.8c0 0 8.4 1.1 12.4-.1c0 0 2-.7-.2-1.8s-.4-2-1.6-1.8c-1.2.1 1.2-1.7-.7-1.5c-1.9.2-.4-2.5-1.7-1.9c-1.3.7-.9-2-1.6-1.1c-.6.8-.4-.9-1-.7s-.8.2-1 1.1" fill="#ed4c5c"></path>
      <path d="M10.8 59.9s-.4.3-1.1.6c-.3.1-.7.3-1.2.4c-.4 0-.8.1-1.3.1s-.9 0-1.4-.1c-.4-.1-.9-.2-1.2-.3c-.7-.2-1.1-.4-1.1-.4s.5-.2 1.2-.3c.7-.1 1.6-.2 2.5-.3c.9 0 1.8 0 2.5.1c.6.1 1.1.2 1.1.2" fill="#ffc7ce"></path>
      <path d="M21.2 51.1l-6.4-6.4S42.6 13.9 52.2 4c2.6-2.7 7-2.7 9.7 0c2.7 2.7 2.7 7.1 0 9.7c-9.9 9.5-40.7 37.4-40.7 37.4" fill="#89664c"></path>
      <path d="M20.2 50l-4.3-4.3S43.4 16.3 52.7 6.6c2.6-2.6 6.2-3.3 8-1.4c1.8 1.8 1.2 5.4-1.4 8C49.6 22.6 20.2 50 20.2 50" fill="#d3976e"></path>
      <path fill="#c7d3d8" d="M13.894 44.98l3.465-3.466l7.07 7.071l-3.464 3.465z"></path>
      <path fill="#ffffff" d="M15.167 46.25l3.465-3.464l4.525 4.526l-3.465 3.464z"></path>
    </svg>

    <!-- Background audio (kept from your original) -->
    <audio id="background-music" loop>
      <source src="your-music.mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
    const sentences = [
      "Dear [Their Name],",
      "Wherever you are when you read this, I want you to know something simple and true:",
      "I love you.",
      "Not just sometimes, but deeply and always.",
      "You are my calm in chaos, my spark in silence, and my favorite thought.",
      "This letter is here so you can come back to it anytime you need a reminder.",
      "Whenever you miss me or just want to feel loved, this will say it for you:",
      "I love you. I'm with you. I'm proud of u.",
      "Forever yours,",
      "[Your Name]"
    ];

    const letterDiv = document.getElementById("letter");
    const pen = document.getElementById("pen");
    let sentenceIndex = 0;
    const TYPING_SPEED = 150; // ms per character

    // write characters one-by-one (wrap each char in .char so we can measure it)
    function writeWord(wordSpan, word, index = 0, done) {
      if (index >= word.length) {
        // finished the word: add trailing space and call done
        wordSpan.appendChild(document.createTextNode(" "));
        done();
        return;
      }

      // create a span for the next character
      const ch = document.createElement("span");
      ch.className = "char";
      ch.textContent = word[index];
      wordSpan.appendChild(ch);

      // measure the JUST appended character
      const charRect = ch.getBoundingClientRect();
      const containerRect = letterDiv.getBoundingClientRect();

      // target point = bottom-right of that character
      const x = charRect.right - containerRect.left;
      const y = charRect.bottom - containerRect.top;

      pen.style.left = x + "px";
      pen.style.top = y + "px";
      pen.style.opacity = "1";

      // next character after delay
      setTimeout(() => writeWord(wordSpan, word, index + 1, done), TYPING_SPEED);
    }

    function showSentence(sentence, callback) {
      const p = document.createElement("p");
      letterDiv.appendChild(p);

      const words = sentence.split(" ");
      let i = 0;

      function nextWord() {
        if (i >= words.length) {
          // After finishing sentence hide pen and call callback after a short pause
          pen.style.opacity = "0";
          setTimeout(callback, 700);
          return;
        }

        const wspan = document.createElement("span");
        wspan.className = "word";
        p.appendChild(wspan);

        writeWord(wspan, words[i], 0, () => {
          i++;
          nextWord();
        });
      }

      nextWord();
    }

    function showNextSentence() {
      if (sentenceIndex >= sentences.length) return;
      showSentence(sentences[sentenceIndex], () => {
        sentenceIndex++;
        showNextSentence();
      });
    }

    // Start button:
    document.getElementById("startBtn").addEventListener("click", (e) => {
      // small ripple position adjustment (visual)
      const btn = e.currentTarget;
      const rect = btn.getBoundingClientRect();
      const after = btn.querySelector("::after"); // not needed; pseudo handled by CSS

      // show container
      document.getElementById("intro").style.display = "none";
      document.getElementById("container").style.display = "block";

      // attempt to play audio (if blocked this will quietly fail)
      const audio = document.getElementById("background-music");
      audio.play().catch(() => { /* autoplay blocked */ });

      // start typing
      setTimeout(showNextSentence, 120); // tiny delay so layout stabilizes
    });
  </script>
</body>
</html>
