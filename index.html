<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My project</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
<style>
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Segoe UI', sans-serif;
  background: #fff0f5;
  overflow: hidden;
}

/* Start wrapper (center everything) */
.start-wrapper {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

/* Container inside wrapper */
.start-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  text-align: center;
}

/* Click Here text + arrow */
#click-hint {
  font-size: 2.4rem;
  color: #ff69b4;
  text-shadow: 0 0 8px #ff69b4, 0 0 15px #ff1493;
  animation: beat 1.2s infinite;
  pointer-events: none; 
}
@keyframes beat {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

/* Wiggle shake animation */
@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  15% { transform: rotate(-8deg); }
  30% { transform: rotate(6deg); }
  45% { transform: rotate(-6deg); }
  60% { transform: rotate(5deg); }
  75% { transform: rotate(-3deg); }
}

/* Start button */
#startBtn {
  cursor: pointer;
  border: none;
  background: none;
  width: 160px;
  height: 160px;
}
#startBtn img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  filter: drop-shadow(0 0 12px rgba(255,105,180,0.7));
  animation: wiggle 1.5s infinite ease-in-out;
}

/* Heart icon */
#heart img {
  width: 80px;
  height: 80px;
  animation: beat-img 1.2s infinite;
}
@keyframes beat-img {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

/* Fade out */
.fade-out {
  animation: fadeOut 1.8s forwards ease-in-out;
}
@keyframes fadeOut {
  from { opacity: 1; transform: scale(1); }
  to   { opacity: 0; transform: scale(0.8); }
}

/* Ripple effect */
.ripple {
  position: fixed;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,20,147,0.8) 0%, rgba(255,20,147,0.3) 70%);
  width: 40px; height: 40px;
  transform: translate(-50%, -50%) scale(1);
  animation: ripple-anim 4s ease-out forwards;
  pointer-events: none;
  z-index: 9;
}
@keyframes ripple-anim {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 0.7; }
  100% { transform: translate(-50%, -50%) scale(80); opacity: 0; }
}

/* Letter container */
#container {
  opacity: 0;
  pointer-events: none;
  position: relative;
  max-width: 90%;
  width: 700px;
  height: 80vh;
  margin: 80px auto;
  background: #ffffffee;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 4px 15px rgba(250,50,120,0.2);
  transition: opacity 1s ease-in;
  text-align: left;
  z-index: 10;
  overflow-y: auto;
    /* Letter page background */
  background: url("stellalou-letter-bg.jpg") no-repeat center center;
  background-size: cover;
}
#container::-webkit-scrollbar { display: none; }
#container { -ms-overflow-style: none; scrollbar-width: none; }
#container.show { opacity: 1; pointer-events: auto; }

/* Letter text */
#letter { 
  font-family: 'Great Vibes', cursive; 
  font-size: 1.8rem; 
  color: #ff69b4; 
  white-space: pre-wrap; 
  position: relative; 
}
#letter p { margin: 1.2em 0; position: relative; }
#letter p span.letter { 
  display: inline-block; 
  opacity: 0; 
  transform: translateY(5px); 
  transition: opacity 0.15s ease, transform 0.15s ease; 
}

/* Ink trail */
.ink-trail {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  background: radial-gradient(circle, rgba(255,105,180,0.6) 0%, rgba(255,105,180,0) 60%);
  opacity: 0;
  transition: all 0.3s ease-out;
  width: 4px;
  height: 1.8rem;
}

/* Heart container */
#heart { text-align: center; margin-top: 24px; }
</style>
</head>
<body>

<!-- Start button with hint -->
<div class="start-wrapper">
  <div class="start-container" id="start-container">
    <div id="click-hint">
      Click Here <br> ↓
    </div>
    <button id="startBtn">
      <img src="stella.png" alt="Start">
    </button>
  </div>
</div>
  
<!-- Letter page -->
<div id="container">
  <h1>Sample letter</h1>
  <div id="letter"></div>
  <div id="heart"><img src="stellalou.png" alt="Custom Icon"></div>
  <audio id="background-music" loop>
    <source src="https://github.com/eddiewei-png/letter/raw/refs/heads/main/YisaYu-LiXian.mp3" type="audio/mpeg">
  </audio>
</div>

<script>
// Sentences
const sentences = [
  ["Line 1 行一", "Line 1 English"],
  ["Line 2 行二行二行二", "Line 2 English"],
  ["Line 3 行三", "Line 3 English"],
  ["Line 4 行四"],
  ["Line 5 行五"],
  ["[Your Name]"]
];

const letterDiv = document.getElementById("letter");
const inkTrails = [];
for(let i=0;i<3;i++){
  const ink = document.createElement("span");
  ink.classList.add("ink-trail");
  letterDiv.appendChild(ink);
  inkTrails.push(ink);
}
let trailIndex = 0;

function writeLetter(span, letter) {
  return new Promise(resolve => {
    span.textContent += letter;
    requestAnimationFrame(() => {
      span.style.opacity = '1';
      const containerRect = letterDiv.getBoundingClientRect();
      const range = document.createRange();
      range.setStart(span.firstChild || span, span.textContent.length - 1);
      range.setEnd(span.firstChild || span, span.textContent.length);
      const rect = range.getBoundingClientRect();
      const ink = inkTrails[trailIndex % inkTrails.length];
      ink.style.height = rect.height + 'px';
      ink.style.width  = rect.width / 2 + 'px';
      ink.style.left = (rect.right - containerRect.left) + 'px';
      ink.style.top  = (rect.top - containerRect.top) + 'px';
      ink.style.opacity = 1;
      trailIndex++;
      setTimeout(() => ink.style.opacity = 0, 400);
    });
    resolve();
  });
}

async function showSentence(lines, delay=200){
  const pContainer = document.createElement("p");
  letterDiv.appendChild(pContainer);
  if (!Array.isArray(lines)) lines = [lines];
  const spans = lines.map(line => {
    const span = document.createElement("span");
    span.style.display = 'block';
    span.style.marginBottom = '0.2em';
    pContainer.appendChild(span);
    return { span, text: line };
  });
  const maxLength = Math.max(...lines.map(l => l.length));
  for (let i = 0; i < maxLength; i++) {
    for (let { span, text } of spans) {
      if (i < text.length) await writeLetter(span, text[i]);
    }
    await new Promise(r => setTimeout(r, delay));
    letterDiv.parentElement.scrollTop = letterDiv.parentElement.scrollHeight;
  }
}

async function showAllText(){
  for(let s=0; s<sentences.length; s++){
    await showSentence(sentences[s], 300);
    await new Promise(r=>setTimeout(r, 300));
  }
  inkTrails.forEach(ink=>ink.style.display='none');
}

// Start button click
document.getElementById("startBtn").addEventListener("click", function(){
  const container = document.getElementById("container");
  const startContainer = document.getElementById("start-container");

  this.disabled = true;
  this.style.pointerEvents = "none";

  // ripples
  const rect = this.getBoundingClientRect();
  const centerX = rect.left + rect.width/2;
  const centerY = rect.top + rect.height/2;
  for(let i=0;i<5;i++){
    const ripple = document.createElement("span");
    ripple.className = 'ripple';
    ripple.style.left = centerX+'px';
    ripple.style.top = centerY+'px';
    ripple.style.animationDelay = `${i*0.3}s`;
    document.body.appendChild(ripple);
    ripple.addEventListener('animationend', ()=> ripple.remove());
  }

  // fade out button + text
  startContainer.classList.add('fade-out');
  setTimeout(() => {
    startContainer.style.display = 'none';
    container.classList.add('show');
    document.getElementById("background-music").play().catch(()=>console.log("Autoplay blocked"));
    showAllText();
  }, 1300); // wait for fade to finish
});
</script>
</body>
</html>





